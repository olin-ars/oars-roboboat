<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<!--- This file came from http://wiki.ros.org/roslibjs/Tutorials/BasicRosFunctionality -->

<script type="text/javascript" src="eventemitter2.min.js"></script>
<script type="text/javascript" src="roslib.min.js"></script>
<script type="text/javascript" src="jquery-2.2.2.js"></script>

<link rel="stylesheet" href="stylesheet.css" type="text/css">

<script type="text/javascript" src="scripts.js"></script>
</head>

<body>
  <h1>ORS Mission Control</h1>
  <hr>
  <h2>Internal state visualizations</h2>
  <div>Local position: <span class="numdisplay" id="local_pos">[data missing]</span></div>
  <div>Sail position: <span class="numdisplay" id="sail_angle">[data missing]</span></div>
  <div>Rudder position: <span class="numdisplay" id="rudder_angle">[data missing]</span></div>
  <div>True Wind: <span class="numdisplay" id="true_wind">[data missing]</span></div>
  <div>Global Wind: <span class="numdisplay" id="global_wind">[data missing]</span></div>
  <!-- TODO: this should be loaded dynamically from an Inkscape/Illustrator file -->


  <hr>
  <h2>Autonomy Internals</h2>

  <div>Boat is tacking: <span class="numdisplay" id="is_tacking">[data missing]</span></div>
  <div>Target is upwind: <span class="numdisplay" id="is_upwind">[data missing]</span></div>
  <div>Heading error: <span class="numdisplay" id="heading_err">[data missing]</span></div>
  

  <hr>
  <h2>Status</h2>

<table style="width:100%">

<tr>
<th>Sensors</th>
<th>Software</th>
</tr>

<tr>
  <!-- Teensy -->
  <th>
  <div class="statusRow">   
  <br>Teensy: 
  <div style="background-position: -32px 0px;" id="teensystatus" class="statuslight"></div>
  <script>setup_watchdog('/sail/pos', 'std_msgs/Float32', $('#teensystatus'))</script>
  </div>
  </th>

  <th>
  <!-- Arbiter -->
  <div class="statusRow">   
  <br>Arbiter:  
  <div style="background-position: -32px 0px;" id="arbiterstatus" class="statuslight"></div>
  <script>setup_watchdog('/cmd_vel', 'geometry_msgs/Twist', $('#arbiterstatus'))</script>
  </div>
  </th>
</tr>


<tr>
  <th>
  <!-- IMU -->
  <div class="statusRow">   
  <br>IMU: 
  <div style="background-position: -32px 0px;" id="imustatus" class="statuslight"></div>
  <script>setup_watchdog('/imu/data', 'sensor_msgs/Imu', $('#imustatus'))</script>
  </div>
  </th>

  <th>
  <!-- Motor Controller -->
  <div class="statusRow">   
  <br>Motor Controller:  
  <div style="background-position: -32px 0px;" id="motorcontrollerstatus" class="statuslight"></div>
  <script>setup_watchdog('/motor1', 'std_msgs/String', $('#motorcontrollerstatus'))</script>
  </div>
  </th>
</tr>

<tr>
  <th>
  <!-- Fix/ GPS -->
  <div class="statusRow">   
  <br>GPS: 
  <div style="background-position: -32px 0px;" id="fixstatus" class="statuslight"></div>
  <script>setup_watchdog('/fix', 'sensor_msgs/NavSatFix', $('#fixstatus'))</script>
  </div>
  </th>

  <th>
  <!-- Behavior Engine -->
  <div class="statusRow">   
  <br>State Machine Active:  
  <div style="background-position: -32px 0px;" id="smachstatus" class="statuslight"></div>
  <script>setup_watchdog('/smach', 'std_msgs/Float32', $('#smachstatus'))</script>
  </div>
  </th>
  </tr>

<tr>
  <th>
  <!-- Lidar -->
  <div class="statusRow">   
  <br>Lidar:  
  <div style="background-position: -32px 0px;" id="lidarstatus" class="statuslight"></div>
  <script>setup_watchdog('/scan', 'sensor_msgs/LaserScan', $('#lidarstatus'))</script>
  </div>
  </th>
</tr>

<tr>
  <th>
  <!-- Camera -->
  <div class="statusRow">   
  <br>Camera:  
  <div style="background-position: -32px 0px;" id="camerastatus" class="statuslight"></div>
  <script>setup_watchdog('/camera/camera_info', 'sensor_msgs/CameraInfo', $('#camerastatus'))</script>
  </div>
  </th>
</tr>

<tr>
  <th>
  <!-- Joystick -->
  <div class="statusRow">   
  <br>Joystick:  
  <div style="background-position: -32px 0px;" id="joystickstatus" class="statuslight"></div>
  <script>setup_watchdog('/joy', 'sensor_msgs/Joy', $('#joystickstatus'))</script>
  </div>
  </th>
</tr>

</table>



</body>
</html>
